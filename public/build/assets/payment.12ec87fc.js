import{r as _}from"./sha256.c98166cd.js";import"./_commonjsHelpers.712cc82f.js";var b=_();$(document).ready(function(){const e=window.location.origin,t=JSON.parse(document.getElementsByClassName("games-info__body")[0].dataset.game),a=JSON.parse(document.getElementById("nav-tab-payment").dataset.paymentcategory),n=JSON.parse(document.getElementsByClassName("player-input")[0].dataset.infotext),s="76293462937";let m;$(".input-feedback.input-id-player").text(n.infoTextInput.idPlayer),$(".input-feedback.input-country").text(n.infoTextInput.country),$(".modal-body #nameGame span").text(t.title),$(".modal-body #nameGame :input").val(t.id),$("#nav-tab-payment").hide(),$(".info-payment").hide(),$("#formCheckout").hide(),P(),C(a),d({showElement:"#formCheckout"});const f=()=>{const[o,r,i]=[document.querySelector("#formCheckout input[name=_token]").value,$(".modal-body #amount span").text().trim(),$(".modal-body #price span").text().trim()],l=b(m.id+r+i+o).toString();$(".modal-body #checksum :input").val(l)};$("#btnConfirm").prop("disabled",!1),$("#btnConfirm").click(function(){if(u(n.titleModal.alertInfo),$("#idPlayer").val()==""){d({showElement:"#infoCaution",hideElement:"#formCheckout"}),$(".info-caution__empty-country, .info-caution__empty-payment, .info-caution__empty-phone, .info-caution__empty-item").attr("hidden",!0),$(".info-caution__empty-player").removeAttr("hidden").text(n.alert.idPlayer);return}if($(".modal-body #playerName input[name=username]").val()==""&&$("#idPlayer").val()!=""){d({showElement:"#infoCaution",hideElement:"#formCheckout"}),$(".info-caution__empty-country, .info-caution__empty-payment, .info-caution__empty-phone, .info-caution__empty-item").attr("hidden",!0),$(".info-caution__empty-player").removeAttr("hidden").text(n.alert.checkIdPlayer);return}if($(".input-form__country .form-select").val()==""||!$(".input-form__country .form-select").val()){d({showElement:"#infoCaution",hideElement:"#formCheckout"}),$(".info-caution__empty-player, .info-caution__empty-payment, .info-caution__empty-phone, .info-caution__empty-item").attr("hidden",!0),$(".info-caution__empty-country").removeAttr("hidden").text(n.alert.country);return}if($(".modal-body #payment input[name=payment]").val()==""||$(".payment-list").children().length<=0){d({showElement:"#infoCaution",hideElement:"#formCheckout"}),$(".info-caution__empty-player, .info-caution__empty-country, .info-caution__empty-item, .info-caution__empty-phone").attr("hidden",!0),$(".info-caution__empty-payment").removeAttr("hidden").text(n.alert.payment);return}if($(".modal-body #phone").length>0){const o=/^0?8[1-9]{1}\d{1}[\s-]?\d{4}[\s-]?\d{2,5}$/gm;if($(".input-form__phone input[name=phone]").val()==""){d({showElement:"#infoCaution",hideElement:"#formCheckout"}),$(".info-caution__empty-player, .info-caution__empty-country, .info-caution__empty-payment, .info-caution__empty-item").attr("hidden",!0),$(".info-caution__empty-phone").removeAttr("hidden").text(n.alert.phone);return}if(!o.test($(".input-form__phone input[name=phone]").val())){d({showElement:"#infoCaution",hideElement:"#formCheckout"}),$(".info-caution__empty-player, .info-caution__empty-country, .info-caution__empty-payment, .info-caution__empty-item").attr("hidden",!0),$(".info-caution__empty-phone").removeAttr("hidden").text("Phone number is invalid");return}$(".modal-body #phone :input").val($(".input-form__phone input[name=phone]").val()),$(".modal-body #phone span").text($(".input-form__phone input[name=phone]").val())}if($(".modal-body #price input[name=price]").val()==""){d({showElement:"#infoCaution",hideElement:"#formCheckout"}),$(".info-caution__empty-player, .info-caution__empty-country, .info-caution__empty-payment, .info-caution__empty-phone").attr("hidden",!0),$(".info-caution__empty-item").removeAttr("hidden").text(n.alert.item);return}f(),u(n.titleModal.purchase),d({showElement:"#formCheckout",hideElement:"#infoCaution"})}),$(".total-payment__nominal").text(0),$("#idGameInpt").val(t.id),$("#btnClearId").hide(),$("#btnCheckId").click(async function(o){if(!$("#idPlayer").val()){$(".input-feedback.input-id-player").addClass("invalid"),$(".input-feedback.input-id-player").text(n.infoTextInput.warning);return}const r=new URL(`${e}/api/v1/player`);r.searchParams.set("player_id",$("#idPlayer").val()),await fetch(r,{credentials:"include",headers:{"X-Api-Key":s}}).then(i=>i.ok?i.json():Promise.reject(i)).then(i=>{$(this).hide(),m=i.data,$(".input-feedback.input-id-player").removeClass("valid invalid"),$(".input-feedback.input-id-player").addClass("valid"),$(".input-feedback.input-id-player").text(`Player name: ${m.username}`),$("#btnClearId").show(),$(".modal-body #playerId :input").val($("#idPlayer").val()),$(".modal-body #playerId span").text($("#idPlayer").val()),$(".modal-body #playerName :input").val(m.username),$(".modal-body #playerName span").text(m.username),$(".modal-body #emailInpt :input").val(m.email),$(".modal-body #emailInpt span").text(m.email),$("#idPlayer").prop("disabled",!0)}).catch(i=>{$(this).hide(),i.json().then(l=>{$(".input-feedback.input-id-player").removeClass("valid invalid"),$(".input-feedback.input-id-player").addClass("invalid"),$(".input-feedback.input-id-player").text(l.code==300?n.badRequest:l.message)}),$("#idPlayer").prop("disabled",!0),$("#btnClearId").show()})}),$("#btnClearId").click(function(){m=null,$(this).hide(),$("#btnCheckId").show(),$("#idPlayer").prop("disabled",!1),$("#idPlayer").val(""),$(".input-feedback.input-id-player").removeClass("valid invalid"),$(".input-feedback.input-id-player").text(n.infoTextInput.idPlayer),$("#formCheckout").children(".info-user").remove(),j()}),$(".input-form__country .form-select").change(async function(){if($("#paymentLoader, #paymentLoader .spinner-border").addClass("mt-5").show(),$("#nav-tab-payment").hide(),$(".info-payment").hide(),$(".info-payment").empty(),$(".payment-list").empty(),$(".price-list").empty(),$(".phone").empty(),E(),this.value){const o=new URL(`${e}/api/v1/payment`);o.searchParams.set("country",this.value),o.searchParams.set("game_id",t.id),await fetch(o,{credentials:"include",headers:{"X-Api-Key":s}}).then(r=>r.ok?r.json():Promise.reject(r)).then(r=>{$("#nav-tab-payment").show(),$(".info-payment").hide(),y({element:".payment-list",addClass:"justify-content-start",removeClass:"justify-content-center"});const i=r.data;$("#paymentLoader, #paymentLoader .spinner-border").removeClass("mt-5").hide(),$(".payment-list").empty(),$("#nav-tab .nav-link").click(function(){I({classElement:"phone"}),$(".price-list").empty(),$(".payment-list__items").children().prop("checked",!1),c()}),i.map(({payment:l})=>{k(l)}),$("#formCheckout").hide(),$("#infoCaution").show(),$(".payment-list__items").click(function(){c(),$(".modal-body #phone").remove(),$(this).children().prop("checked",!0);const{payment:l,price:v}=i.find(({payment:p})=>p.payment_id==this.dataset.payment);x(l),$(".price-list").empty(),$(".modal-body #payment span").text(l.name_channel),$(".modal-body #payment input[name=payment]").val(l.name_channel),$(".modal-body #payment input[name=payment_id]").val(l.payment_id),$("#formCheckout").hide(),$("#infoCaution").show(),v.map(p=>{$(".price-list").append(`<div class="col"><div class="amount-price__wrap d-flex justify-content-between p-2" data-priceid="${p.price_id}"><div class="amount-price__name-item"><input type="radio" id="${p.price_id}" name="price-id" value="${p.price_id}"> ${p.amount} ${p.name}</div><div class="amount-price__price" id="price">${p.price}</div></div></div>`)}),$(".amount-price__wrap").click(function(){$(this).children(".amount-price__name-item").children().prop("checked",!0);const p=parseInt($(this).children(".amount-price__price").text());$(".total-payment__nominal").text(p),$(".modal-body #price :input").val(p),$(".modal-body #price span").text(p),$(".modal-body #amount input[name=amount]").val($(this).children(".amount-price__name-item").text()),$(".modal-body #amount span").text($(this).children(".amount-price__name-item").text()),$(".modal-body #priceId").val($(this).children(".amount-price__name-item").children("input").val()),$("#formCheckout").show(),$("#infoCaution").hide()})})}).catch(r=>{r.json().then(i=>{y({element:".info-payment",addClass:"justify-content-center"}),$("#nav-tab-payment").hide(),$("#paymentLoader, #paymentLoader .spinner-border").removeClass("mt-5").hide(),$(".payment-list").empty(),$(".payment-list").addClass("justify-content-center"),$(".price-list").empty(),$(".info-payment").empty(),i.code==401?$(".info-payment").append("Please try again."):$(".info-payment").append(n.noPayment),$(".info-payment").show()})})}}),$("#reload").click(async function(){await fetch(`${window.location.origin}/reload-captcha`).then(o=>o.json()).then(o=>{console.log(o),$(".captcha span").html(o.captcha)})})});const u=e=>{$("#modalPaymentLabel").text(),$("#modalPaymentLabel").text(e)},d=({showElement:e=null,hideElement:t=null})=>{$(e).show(),$(t).hide()},C=e=>{e.map(({category:t,id:a},n)=>{if(n==0){$("#nav-tab").append(`<button class="nav-link active" id="nav-${a}-tab" data-bs-toggle="tab" data-bs-target="#nav-${a}" type="button" role="tab" aria-controls="nav-${a}" aria-selected="true">${t}</button>`),$("#nav-tabContent").append(`<div class="tab-pane fade show active" id="nav-${a}" role="tabpanel" aria-labelledby="nav-${a}-tab" tabindex="0"><div class="payment-list row row-cols-2 row-cols-md-3 row-cols-xl-4 g-2"></div></div>`);return}$("#nav-tab").append(`<button class="nav-link" id="nav-${a}-tab" data-bs-toggle="tab" data-bs-target="#nav-${a}" type="button" role="tab" aria-controls="nav-${a}" aria-selected="true">${t}</button>`),$("#nav-tabContent").append(`<div class="tab-pane fade show" id="nav-${a}" role="tabpanel" aria-labelledby="nav-${a}-tab" tabindex="0"><div class="payment-list row row-cols-2 row-cols-md-3 row-cols-xl-4 g-2"></div></div>`)})},k=({category_id:e,payment_id:t,name_channel:a,logo_channel:n})=>{$("#nav-"+e+" .payment-list").append(`<div class="col"><div class="payment-list__items" data-payment="${t}"><input type="radio" id="${t}" name="payment-id" value="${t}"><img src="${n}" title="${a}" alt="${a}" class="ps-2"></div></div>`)},x=({phone_required:e})=>{if(e){$(".wrap-phone").show({complete:w()});return}$(".wrap-phone").hide()},w=()=>{$(".modal-body .checkout-confirm__info").before('<div class="row justify-content-around mb-2" id="phone"><div class="col-6">Phone :</div><div class="col-4 text-end"><span></span></div><input type="text" name="phone" hidden></div>')},P=()=>{$(".wrap-phone").append('<div class="col col-md-4 col-lg-3 input-group"><div class="input-form__phone row px-2 pt-3 pt-md-0 ps-md-3"><input type="text" class="form-control" aria-label="phone number" aria-describedby="inputGroup-sizing-sm" placeholder="Phone Number" name="phone"><div class="input-feedback ps-1">Please insert phone number</div></div></div>'),h()},h=()=>{$(".wrap-phone").hide({done:g()})},g=()=>{$(".input-form__phone input[name=phone]").val("")},I=({idElement:e=null,classElement:t=null})=>{e&&$("#"+e).remove(),t&&$("."+t).remove()},E=()=>{$(".modal-body #payment span").text(""),$(".modal-body #payment input[name=payment]").val(""),$(".modal-body #payment input[name=payment_id]").val(""),$(".modal-body #amount span").text(""),$(".modal-body #amount :input").val(""),$(".modal-body #phone").remove(),c()},c=()=>{h(),$(".modal-body #price span").text(""),$(".modal-body #price input[name=price]").val(""),$(".total-payment__nominal").text("0")},j=()=>{$(".modal-body #playerId :input").val($("#idPlayer").val()),$(".modal-body #playerId span").text($("#idPlayer").val()),$(".modal-body #playerName :input").val(""),$(".modal-body #playerName span").text("")},y=({element:e=null,addClass:t=null,removeClass:a=null})=>{$(e).removeClass(a),$(e).addClass(t)};
